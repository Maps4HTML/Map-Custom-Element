<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Remote layer with map-link rel=features</title>
    <meta charset="UTF-8">
    <script type="module" src="mapml.js"></script>
    <style>
      html {
        height: 100%
      }

      body {
        height: inherit
      }

      * {
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <mapml-viewer projection="OSMTILE" data-testid="viewer" style="height: 500px;width:500px;" controls zoom="18" lat="40.7075" lon="-74.011" >
      <map-layer data-testid="inline-features" label="inline-features" checked>
        <map-meta name="projection" content="OSMTILE"></map-meta>
        <map-meta name="cs" content="pcrs"></map-meta>
        <map-meta name="extent" content="top-left-easting=-8238959.40,top-left-northing=4971112.17,bottom-right-easting=-8237812.69,bottom-right-northing=4969300.12"></map-meta>
        <map-style>.poi-r1-s1.poi-r1-s2 {opacity:1.0; fill:rebeccapurple; stroke:rebeccapurple; fill-opacity:0.7}</map-style>
        <map-feature id="poi.2" class="poi-r1-s1 poi-r1-s2">
          <map-geometry>
            <map-point>
              <map-coordinates>-8238848.744948964 4969300.121476209</map-coordinates>
            </map-point>
          </map-geometry>
          <map-properties>
            <table xmlns="http://www.w3.org/1999/xhtml">
              <thead>
                <tr>
                  <th role="columnheader" scope="col">Property name</th>
                  <th role="columnheader" scope="col">Property value</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">MAINPAGE</th>
                  <td itemprop="MAINPAGE">pics/22037829-L.jpg</td>
                </tr>
              </tbody>
            </table>
          </map-properties>
        </map-feature>
        <map-feature data-testid="poi-1" id="poi.1" class="poi-r1-s1 poi-r1-s2">
          <map-featurecaption>Long href</map-featurecaption>
          <map-geometry>
            <map-a type="text/mapml" target="_blank" href="http://localhost:8080/geoserver/tiger/wms?service=WMS&version=1.1.0&request=GetMap&layers=tiger%3Atiger_roads&bbox=-74.02722%2C40.684221%2C-73.907005%2C40.878178&width=476&height=768&srs=EPSG%3A4326&styles=&format=text%2Fmapml">
              <map-point>
                <map-coordinates>-8238806.8429565085 4969306.111096254</map-coordinates>
              </map-point>
            </map-a>
          </map-geometry>
          <map-properties>
            <table xmlns="http://www.w3.org/1999/xhtml">
              <thead>
                <tr>
                  <th role="columnheader" scope="col">Property name</th>
                  <th role="columnheader" scope="col">Property value</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">MAINPAGE</th>
                  <td itemprop="MAINPAGE">pics/22037827-L.jpg</td>
                </tr>
              </tbody>
            </table>
          </map-properties>
        </map-feature>
      </map-layer>
      <map-layer data-testid="remote-features" label="remote-features.mapml"  src="remote-features.mapml" checked></map-layer>
      <map-layer data-testid="inline-templated" label="inline-rel-features" checked>
        <map-meta name="projection" content="OSMTILE"></map-meta>
        <map-meta name="cs" content="pcrs"></map-meta>
        <map-meta name="extent" content="top-left-easting=-8238959.40,top-left-northing=4971112.17,bottom-right-easting=-8237812.69,bottom-right-northing=4969300.12"></map-meta>
        <map-extent units="OSMTILE" checked="checked" hidden="hidden">
            <map-style>.poi-r1-s1.poi-r1-s2 {opacity:1.0; fill:green; stroke:green; fill-opacity:0.7}</map-style>
            <map-input name="z" type="zoom" min="0" max="18" ></map-input>
            <map-input name="xmin" type="location" rel="map" position="top-left"     axis="easting" units="pcrs" ></map-input>
            <map-input name="ymin" type="location" rel="map" position="bottom-left"  axis="northing" units="pcrs"></map-input>
            <map-input name="xmax" type="location" rel="map" position="top-right"    axis="easting" units="pcrs"></map-input>
            <map-input name="ymax" type="location" rel="map" position="top-left"     axis="northing" units="pcrs"></map-input>
            <map-input name="w" type="width" min="1" max="4096" ></map-input>
            <map-input name="h" type="height" min="1" max="4096" ></map-input>
            <map-link data-testid="inline-templated-link" rel="features" tref="./remote-features.mapml?format_options=mapmlfeatures:true&amp;request=GetMap&amp;crs=MapML:OSMTILE&amp;bbox={xmin},{ymin},{xmax},{ymax}&amp;format=text/mapml&amp;language=en&amp;version=1.3.0&amp;transparent=true&amp;service=WMS&amp;layers=poi&amp;width={w}&amp;styles=poi&amp;height={h}"></map-link>
        </map-extent>
      </map-layer>
      <map-layer data-testid="remote-templated" src="remote-rel-features.mapml" checked ></map-layer>
    </mapml-viewer>
  </body>
</html>